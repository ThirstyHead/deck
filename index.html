<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>War (The Card Game)</title>

    <style>
      main{
        display: flex;
        text-align: center;
      }

      section{
        border: 1px solid black;
        padding: 1em;
      }

      #player1{
        /* background-color: red; */
        background-color: rgba(255, 0, 0, 0.25);
        flex-grow: 2;
      }

      #player2{
        /* background-color: blue; */
        background-color: rgba(0, 0, 255, 0.25);
        flex-grow: 2;
      }

      #battlefield{
        /* background-color: green; */
        background-color: rgba(0, 255, 0, 0.25);
        flex-grow: 1;
      }

      #play{
        display: flex;
      }

      #player1-play{
        flex-grow: 1;
      }

      #player2-play{
        flex-grow: 1;
      }
    </style>

    <script src="components/card/index.mjs" type="module"></script>
    <script src="components/stack/index.mjs" type="module"></script>

    <script defer type="module">
      import {Game} from '/components/game/game.mjs';

      window.addEventListener('load', init);

      function init(){
        document.querySelector('#player1-stack')
                .addEventListener('click', play);

        document.querySelector('#player2-stack')
                .addEventListener('click', play);

        document.querySelector('button[name="newGame"]')
                .addEventListener('click', newGame);
      }

      function play(event){
        let clickTarget = event.target.id;
        let newTarget = clickTarget.replace('stack', 'play');
        let playTarget = document.querySelector(`#${newTarget}`);
        playTarget.innerHTML = '<ttyw-card suite="SPADES" rank="QUEEN"></ttyw-card>';
      }

      function newGame(){
        let player1name = document.querySelector('#player1-name').innerText;
        let player2name = document.querySelector('#player2-name').innerText;

        window.game = new Game(player1name, player2name);
        window.game.start();
      }

    </script>
  </head>
  <body>
    <h1>War (The Card Game)</h1>
    <main>
      <section id="player1">
        <h2 contenteditable="true" id="player1-name">Player 1</h2>
        <p>(Click to edit)</p>
        <ttyw-stack size="26" id="player1-stack"></ttyw-stack>
      </section>

      <section id="battlefield">
        <h2>Battlefield</h2>
        <p><button name="newGame">New Game</button></p>
        <div id="play">
          <div id="player1-play">
            <ttyw-card suite="SPADES" rank="ACE"></ttyw-card>
          </div>

          <div id="player2-play">
            <ttyw-card suite="HEARTS" rank="KING"></ttyw-card>
          </div>
        </div>
      </section>

      <section id="player2">
        <h2 contenteditable="true" id="player2-name">Player 2</h2>
        <p>(Click to edit)</p>
        <ttyw-stack size="26" id="player2-stack"></ttyw-stack>
      </section>
    </main>
  </body>
</html>
